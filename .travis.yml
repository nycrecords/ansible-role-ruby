language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: ruby
  - EC2_REGION: us-east-1
  - secure: aE1zWsSlA01+5K1JQmQzDHO/+lWgoP7havnq7LjQkS6Bmh9vKnl+dU/Ed4udxTAqk33SWU0wJpGB3Z1iGKPWSJZGk92eQOaGXXrI5iVQ1v+gGoYLL3mJHmV5nxlkyMOEi+yv/7aieM5/DUddD82G02zGZIYlO2c1AOvRIG5J3Z1A2Enm0I+j5HKt8zTlEJw8k9BW993fj9UJ4y1OlkJPcpkPPXtTyxHeGDM/Wsr89jnoGHh2TT9wvv5fjMiFjr72ZYJNsJlWmXnGvhEjvZpjR0sKTMHjuUaCa3ZzXDqc2qDBch63I9G3jsgFmo+cUKa/AkabeDsqmvXdcj+fMqjHHcxCUhMv9KK/jWPuAibKxMltG+hy661u7jvOLfrbEGIuFUyGHWrl9BmqRlmfjAidwYUcH0twI2aIHxMwmZ4o/ZqpEpzQeGIVPPP3gIBpXqnj1m3WB/VPpOR5Lgu6ADBS4urmQ/TCUd0BWYxPdAihVkqOwC0pIp5dYrrsBb2wyqmDhk/G5eIWQoO28CquqAuDe7c6GzRGJfdKy8uV+9nLty+XbK+tUC/dKjIwYeNXLXrP2qdb9NHTLiL+RFsnaCaXVamMKxF23MODcE0x1cCgZVWz0fZ5/va8lHmo4iSrPl4gAjJTC5B2/sg1BpX+cdoMYMcSDceJSfp0clDZLq8sys0=
  - secure: o6x9Y0AmrWMYxopkW/1PFZGcMrMZZDf4M4iRwQu+a5wLA40MsImffVGhyjSlJft86cIXpMScmlffk9tA30nGew2iHTxKfFTzW2t2ozK0JrInoLnIQzipUOWL2IafXFZwmfV1h8Tu+LtaSCkCMiSeMb4KtV2VIdCoKcHl71XhnLVNXXQT1BqiksOFNSCzJlG2U8VG7iHLfEFvi3VwYzGCzPXmPbX9t9PJeUb3x4iDdg/6s8bytg5aIVGG3gXIVudK6V+Mfq7GNjc4nFxww5cqkTm4ksTUeyvQGVDkG9CQXuNU2pb5g6ECZrVRlpIqF1MpTlHoYzSN3x394v1VoFcFyI3HbgnGv9naXSH3fqyn8iF8U1MXqXvE0rSbmqZHVcqeYEv+bd7Xm/w3sj5iL1d8R2ndb0dnvn017S8ZBQBtH97MkoHwRH3OYqxOqnntpRQ4FOfykucJETZRiBbXH73asbVRyCj4Zdt6J984LoALKfGfuLUfFZG+pDJINKXunpOHDGCF/IjulGYONQS4M/DXV2+nkfO7awwxXKWAhJ334eproQ/FhCAdKybpIqRoIgTySvIgBJuOTkodufLZCRpryBhqsMQhRxASC9obSl5IQcusgMCYr2asMh6sl3NX+ZEDVF/7t0vnkwnVg5shYx2+YHuW1XPjQpmfGgPPRPiI2wE=
  - secure: GKHfjrnkHNHHV4kolieHUrlC/OcPfuSh/2mZgM+XR2EaT4AzHNQRdbabmLRtE2j/HgSeM7nj7KQKQWcKnnbPmKKQJtp1POV9GSPmwtJ/PjQGXzNXVdYomtBfyMLu7mwUKr6n/NwHrWKHmzczGS0pOOv8bpOLXYCYGDgRbQS2QXS8rC8AKAAgFtk184UZFLaYv+Xr2Fpa3ZmpZgScEzPQrRo6e8BKPnDkvdq3lT00JZEHkG3FeD2HyW1QWGn72wGMcgH4eYwdhPc4G54R0MsjN2M1ucayBYnDT+WkxA7nEtV1uwUenbeSkHJR2C648DBSqPugYy2BBf9xXm4aNspdHjTI645X3eVNqj8Te4Cd5fZS7cuhL2jJhALek+ptS/vdyKWm19J5jf9VNgdeNIUfwWiKf0czZ7li4wuqwytWni2XxBNbUMRpS5pqTTB40BPwtk0/8sUqJPETBdb6OQ0RgzORmD2cpSHykz7n7Pjcrz4OLre2yh6vgDZJIfxfX1Mbzy3Nri/3Q2OyJD0LJvsDhVMR6u/kjX5mfpTPHBPqV4PKHHXruLuTNDr9NuQUZB3zY/b25NkMeDh84LtMfduL8xLQQNmMOtAmiPcAzPlC+16vHdtu0YcxVnNcfrFdSG0D4r2TKI5LD77HRuY1rbXlUKEwk3fKUhPsjUkFtGGBafE=
  - secure: UwJijsONvV6gXvY1e4PezlGWtzNRvGujz5cVMLsnqbQGmnq5MKWucfnDKCApNHvLCLKmqSC91AktU9frELBXh5sIvmDmmMNFZK1s6fShbf3QF/a+e2h/LM2z5ARYPjFSMMhbOnsc9eXe9w+EBVa02EjBdnmUxycPx8IobMyvQ4H1dpYJL+I50Vxhn5bbDLdjcfgxCq6KzJGjiotsN2aEKnB5GZlcrEstSk/KKrM4U2JuGvgLbGFv4Og/mtCCIOQZYwwroTJyS2VvA6samGRKz/exFme0zx5vQzD69z0uB+1vUPbHTbuw4RjRxEHYYSyfLDTLqlmjb1V6vTRy6ooYRzkdlx0iSEc6swUWlSZWGRuKbzaCdHLnqRn9Sskyb/6IWOpYhNU6vc92nlbMmeshZOqtxamOdsDRVoHaGSNOVtoZMegBcn87ztF/pXzzj0nTT5V55d3g5kG5wdlmzbS4BgGHGKZVMtbQkYzUU1spGdanx3kKS1z7ezzVvH6oSMpmUQhnvNsJKTMVJYmkMlwfdR0sf1RC0YJ6xpFTlWmt2A9yB2lrIGxW6VGUf4SERcbohk/VWWpxi1suu7f25aiZmpY0xdUJmbPD+kFCLp1XBfqdoDU/V49C4TZ6sEK1+OPOiqgh55C1Sclt1iBx420PG4lWT7em4rTVbw9nuC/xGcI=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
